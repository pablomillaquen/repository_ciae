{"version":3,"file":"ajaxcalls.min.js","sources":["../src/ajaxcalls.js"],"sourcesContent":["import $ from \"jquery\";\r\nimport ajax from \"core/ajax\";\r\nimport { exception } from \"core/notification\";\r\n\r\n\r\nconst searchIndex = (selectedTypes, searchText, gradesSelected, selectOrder)=>{\r\n    const promisesLoad = ajax.call([{\r\n        methodname: \"local_repositoryciae_loadjson\",\r\n        args: {selectedTypes, searchText, gradesSelected, selectOrder},\r\n        fail: exception\r\n    }]);\r\n    promisesLoad[0].then(data => {\r\n        if(data.length > 0){\r\n            $('#data').val(data[0].data);\r\n            JSON.parse(data[0].data);\r\n        }else{\r\n            return Error;\r\n        }\r\n        return(data.length > 0 ? data[0].data : \"No data\");\r\n        window.console.log(data);\r\n    });\r\n};\r\n\r\nconst getFiles = (discussionId)=>{\r\n    const promisesLoad = ajax.call([{\r\n        methodname: \"local_repositoryciae_load_discussion_files\",\r\n        args: {discussionId},\r\n        fail: exception\r\n    }]);\r\n    promisesLoad[0].then(data => {\r\n        console.log(data);\r\n        if(data.length > 0){\r\n            var $dropdown = $(\"#linkid\");\r\n            var i = 0;\r\n            $.each(data, function() {\r\n                $dropdown.append($(\"<option />\").val(this.id).text(this.filename));\r\n                if(i === 0) $('input[name=link]').val(this.id);\r\n                i++;\r\n            });\r\n        }else{\r\n            return Error;\r\n        }\r\n        return(data.length > 0 ? data[0].data : \"No data\");\r\n    });\r\n};\r\n\r\nconst searchOa = (gradesSelected)=>{\r\n    const promisesLoad = ajax.call([{\r\n        methodname: \"local_repositoryciae_load_oa\",\r\n        args: {gradesSelected},\r\n        fail: exception\r\n    }]);\r\n    promisesLoad[0].then(data => {\r\n        var $dropdown = $(\"#id_oa\");\r\n        $dropdown.empty();\r\n        if(data.length > 0){\r\n            $.each(data, function() {\r\n                $dropdown.append($(\"<option />\").val(this.id).text(this.description));\r\n                window.console.log(\"uno\");\r\n            });\r\n        }else{\r\n            return Error;\r\n        }\r\n        return(data.length > 0 ? data[0].data : \"No data\");\r\n    });\r\n};\r\n\r\nexport { searchIndex, getFiles, searchOa };"],"names":["selectedTypes","searchText","gradesSelected","selectOrder","ajax","call","methodname","args","fail","exception","then","data","length","val","JSON","parse","Error","discussionId","console","log","$dropdown","i","each","append","this","id","text","filename","empty","description","window"],"mappings":"wbAKoB,SAACA,cAAeC,WAAYC,eAAgBC,aACvCC,cAAKC,KAAK,CAAC,CAC5BC,WAAY,gCACZC,KAAM,CAACP,cAAAA,cAAeC,WAAAA,WAAYC,eAAAA,eAAgBC,YAAAA,aAClDK,KAAMC,2BAEG,GAAGC,MAAK,SAAAC,aACdA,KAAKC,OAAS,uBACX,SAASC,IAAIF,KAAK,GAAGA,MACvBG,KAAKC,MAAMJ,KAAK,GAAGA,MAIhBA,KAAKC,OAAS,EAAID,KAAK,GAAGA,KAAO,WAF7BK,4BAOF,SAACC,cACOb,cAAKC,KAAK,CAAC,CAC5BC,WAAY,6CACZC,KAAM,CAACU,aAAAA,cACPT,KAAMC,2BAEG,GAAGC,MAAK,SAAAC,SACjBO,QAAQC,IAAIR,QACTA,KAAKC,OAAS,UASNI,UARHI,WAAY,mBAAE,WACdC,EAAI,yBACNC,KAAKX,MAAM,WACTS,UAAUG,QAAO,mBAAE,cAAcV,IAAIW,KAAKC,IAAIC,KAAKF,KAAKG,WAC/C,IAANN,IAAS,mBAAE,oBAAoBR,IAAIW,KAAKC,IAC3CJ,OAKDV,KAAKC,OAAS,EAAID,KAAK,GAAGA,KAAO,gCAI/B,SAACT,gBACOE,cAAKC,KAAK,CAAC,CAC5BC,WAAY,+BACZC,KAAM,CAACL,eAAAA,gBACPM,KAAMC,2BAEG,GAAGC,MAAK,SAAAC,UACbS,WAAY,mBAAE,iBAClBA,UAAUQ,QACPjB,KAAKC,OAAS,mBACXU,KAAKX,MAAM,WACTS,UAAUG,QAAO,mBAAE,cAAcV,IAAIW,KAAKC,IAAIC,KAAKF,KAAKK,cACxDC,OAAOZ,QAAQC,IAAI,UAKpBR,KAAKC,OAAS,EAAID,KAAK,GAAGA,KAAO,WAF7BK"}